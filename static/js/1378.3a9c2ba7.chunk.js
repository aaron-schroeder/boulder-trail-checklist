"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1378],{51378:function(e,t,r){r.d(t,{x:function(){return _}});var i=r(1413),a=r(15671),n=r(43144),o=(r(93169),r(16889)),s=r(92026),u=r(37825),l=r(49800),h=r(8548),p=r(30308),_=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,a.Z)(this,e),this._context=t,this.type="texture",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,t.instanceCounter.increment(h._g.Texture,this),this._descriptor=(0,i.Z)({target:h.No.TEXTURE_2D,samplingMode:h.cw.LINEAR,wrapMode:h.e8.REPEAT,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,isImmutable:!1},r),t.type!==l.zO.WEBGL2&&(this._descriptor.isImmutable&&(this._descriptor.isImmutable=!1),m(this._descriptor.target)))throw new Error("3D and array textures are not supported in WebGL1");this._descriptor.target===h.No.TEXTURE_CUBE_MAP?this._setDataCubeMap(n):this.setData(n)}return(0,n.Z)(e,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}},{key:"isDirty",get:function(){return this._samplingModeDirty||this._wrapModeDirty}},{key:"dispose",value:function(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(h._g.Texture,this))}},{key:"release",value:function(){this.dispose()}},{key:"resize",value:function(e,t){var r=this._descriptor;if(r.width!==e||r.height!==t){if(this._wasImmutablyAllocated)throw new Error("Immutable textures can't be resized!");r.width=e,r.height=t,this._descriptor.target===h.No.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}},{key:"_setDataCubeMap",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=h.No.TEXTURE_CUBE_MAP_POSITIVE_X;t<=h.No.TEXTURE_CUBE_MAP_NEGATIVE_Z;t++)this._setData(e,t)}},{key:"setData",value:function(e){this._setData(e)}},{key:"_setData",value:function(t,r){var i=this;if(this._context&&this._context.gl){var a=this._context.gl;this._glName||(this._glName=a.createTexture()),void 0===t&&(t=null);var n=this._descriptor;null!=r||(r=n.target);var o,l=m(r);null===t&&(n.width=n.width||4,n.height=n.height||4,l&&(n.depth=null!=(o=n.depth)?o:1));var _=this._context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),e._validateTexture(this._context,n),this._configurePixelStorage();var g=n.pixelFormat,T=n.internalFormat?n.internalFormat:this._deriveInternalFormat(g,n.dataType);if(d(t)){var f=t.width,x=t.height;t instanceof HTMLVideoElement&&(f=t.videoWidth,x=t.videoHeight),n.width&&n.height,l&&n.depth,n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(r,T,n.hasMipmap,f,x,1),this._texImage(r,0,T,f,x,1,t),(0,u.zu)(a),n.hasMipmap&&this.generateMipmap(),void 0===n.width&&(n.width=f),void 0===n.height&&(n.height=x),l&&void 0===n.depth&&(n.depth=1)}else{var w=n.width,M=n.height,A=n.depth;if(null!=w&&null!=M||console.error("Width and height must be specified!"),l&&null==A&&console.error("Depth must be specified!"),n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(r,T,n.hasMipmap,w,M,A),a.DEPTH24_STENCIL8&&T===a.DEPTH_STENCIL&&(T=a.DEPTH24_STENCIL8),c(t)){var I=t.levels,v=E(r,w,M,A),b=Math.min(v-1,I.length-1);(0,p.Z)(a)?a.texParameteri(n.target,a.TEXTURE_MAX_LEVEL,b):n.hasMipmap=n.hasMipmap&&v===I.length;var R=T;if(!function(e){return e in h.q_}(R))throw new Error("Attempting to use compressed data with an umcompressed format!");this._forEachMipmapLevel((function(e,t,a,n){var o=I[Math.min(e,I.length-1)];i._compressedTexImage(r,e,R,t,a,n,o)}),b)}else(0,s.pC)(t)?(this._texImage(r,0,T,w,M,A,t),(0,u.zu)(a),n.hasMipmap&&this.generateMipmap()):this._forEachMipmapLevel((function(e,t,n,o){i._texImage(r,e,T,t,n,o,null),(0,u.zu)(a)}))}e._applySamplingMode(a,this._descriptor),e._applyWrapMode(a,this._descriptor),e._applyAnisotropicFilteringParameters(this._context,this._descriptor),(0,u.zu)(a),this._context.bindTexture(_,e.TEXTURE_UNIT_FOR_UPDATES)}}},{key:"updateData",value:function(t,r,i,a,n,o){o||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");var s=this._context.gl,u=this._descriptor,l=u.pixelFormat,h=u.internalFormat,p=u.dataType,_=u.isImmutable,m=u.target;if(_&&!this._wasImmutablyAllocated)throw new Error("Cannot update immutable texture before allocation!");var E=this._context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);(r<0||i<0||a>u.width||n>u.height||r+a>u.width||i+n>u.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage(),d(o)?s.texSubImage2D(m,t,r,i,l,p,o):c(o)?s.compressedTexSubImage2D(m,t,r,i,a,n,h,o.levels[t]):s.texSubImage2D(m,t,r,i,a,n,l,p,o),this._context.bindTexture(E,e.TEXTURE_UNIT_FOR_UPDATES)}},{key:"updateData3D",value:function(t,r,i,a,n,o,s,u){u||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");var l=this._context.gl;if(!(0,p.Z)(l))throw new Error("3D textures are not supported in WebGL1");var h=this._descriptor,_=h.pixelFormat,d=h.dataType,E=h.isImmutable,g=h.target,T=h.internalFormat;if(E&&!this._wasImmutablyAllocated)throw new Error("Cannot update immutable texture before allocation!");m(g)||console.warn("Attempting to set 3D texture data on a non-3D texture");var f=this._context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);if(this._context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),(r<0||i<0||a<0||n>h.width||o>h.height||s>h.depth||r+n>h.width||i+o>h.height||a+s>h.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage(),c(u))u=u.levels[t],l.compressedTexSubImage3D(g,t,r,i,a,n,o,s,T,u);else{var x=u;l.texSubImage3D(g,t,r,i,a,n,o,s,_,d,x)}this._context.bindTexture(f,e.TEXTURE_UNIT_FOR_UPDATES)}},{key:"generateMipmap",value:function(){var t=this._descriptor;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new Error("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,e._validateTexture(this._context,t)}t.samplingMode===h.cw.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=h.cw.LINEAR_MIPMAP_NEAREST):t.samplingMode===h.cw.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=h.cw.NEAREST_MIPMAP_NEAREST);var r=this._context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);this._context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),this._context.gl.generateMipmap(t.target),this._context.bindTexture(r,e.TEXTURE_UNIT_FOR_UPDATES)}},{key:"setSamplingMode",value:function(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}},{key:"setWrapMode",value:function(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,e._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}},{key:"applyChanges",value:function(){var t=this._context.gl,r=this._descriptor;this._samplingModeDirty&&(e._applySamplingMode(t,r),this._samplingModeDirty=!1),this._wrapModeDirty&&(e._applyWrapMode(t,r),this._wrapModeDirty=!1)}},{key:"_deriveInternalFormat",value:function(e,t){if(this._context.type===l.zO.WEBGL1)return e;switch(t){case h.Br.FLOAT:switch(e){case h.VI.RGBA:return h.lP.RGBA32F;case h.VI.RGB:return h.lP.RGB32F;default:throw new Error("Unable to derive format")}case h.Br.UNSIGNED_BYTE:switch(e){case h.VI.RGBA:return h.lP.RGBA8;case h.VI.RGB:return h.lP.RGB8}default:return e}}},{key:"_configurePixelStorage",value:function(){var e=this._context.gl,t=this._descriptor,r=t.unpackAlignment,i=t.flipped,a=t.preMultiplyAlpha;e.pixelStorei(e.UNPACK_ALIGNMENT,r),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a?1:0)}},{key:"_texStorage",value:function(e,t,r,i,a,n){var o=this._context.gl;if(!(0,p.Z)(o))throw new Error("Immutable textures are not supported in WebGL1");if(!function(e){return e in h.lP}(t))throw new Error("Immutable textures must have a sized internal format");if(this._descriptor.isImmutable){var s=r?E(e,i,a,n):1;m(e)?o.texStorage3D(e,s,t,i,a,n):o.texStorage2D(e,s,t,i,a),this._wasImmutablyAllocated=!0}}},{key:"_texImage",value:function(e,t,r,i,a,n,o){var u=this._context.gl,h=null,p=this._context.type===l.zO.WEBGL2,_=m(e),c=this._descriptor,E=c.isImmutable,g=c.pixelFormat,T=c.dataType;if(p&&(h=u),p||!d(o))if(E){if((0,s.pC)(o)){var f=o;_?h.texSubImage3D(e,t,0,0,0,i,a,n,g,T,f):u.texSubImage2D(e,t,0,0,i,a,g,T,f)}}else{var x=(0,s.Wg)(o);_?h.texImage3D(e,t,r,i,a,n,0,g,T,x):u.texImage2D(e,t,r,i,a,0,g,T,x)}else u.texImage2D(e,0,r,g,T,o)}},{key:"_compressedTexImage",value:function(e,t,r,i,a,n,o){var u=this._context.gl,h=null,p=m(e),_=this._descriptor.isImmutable;if(p){if(this._context.type!==l.zO.WEBGL2)throw new Error("3D textures are not supported in WebGL1");h=u}_?(0,s.pC)(o)&&(p?h.compressedTexSubImage3D(e,t,0,0,0,i,a,n,r,o):u.compressedTexSubImage2D(e,t,0,0,i,a,r,o)):p?h.compressedTexImage3D(e,t,r,i,a,n,0,o):u.compressedTexImage2D(e,t,r,i,a,0,o)}},{key:"_forEachMipmapLevel",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,r=this._descriptor,i=r.width,a=r.height,n=r.depth,o=r.hasMipmap,s=r.target,u=s===h.No.TEXTURE_3D,l=0;e(l,i,a,n),o&&(1!==i||1!==a||u&&1!==n)&&!(l>=t);++l)i=Math.max(1,i>>1),a=Math.max(1,a>>1),u&&(n=Math.max(1,n>>1))}}],[{key:"_validateTexture",value:function(e,t){(t.width<0||t.height<0||t.depth<0)&&console.error("Negative dimension parameters are not allowed!");var r=(0,p.Z)(e.gl),i=(0,o.wt)(t.width)&&(0,o.wt)(t.height);r||!t.isImmutable&&!m(t.target)||console.error("Immutable and 3D-like textures are not supported in WebGL1!"),r||i||("number"==typeof t.wrapMode?t.wrapMode!==h.e8.CLAMP_TO_EDGE&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):t.wrapMode.s===h.e8.CLAMP_TO_EDGE&&t.wrapMode.t===h.e8.CLAMP_TO_EDGE||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),t.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}},{key:"_applySamplingMode",value:function(e,t){var r=t.samplingMode,i=t.samplingMode;r===h.cw.LINEAR_MIPMAP_NEAREST||r===h.cw.LINEAR_MIPMAP_LINEAR?(r=h.cw.LINEAR,t.hasMipmap||(i=h.cw.LINEAR)):r!==h.cw.NEAREST_MIPMAP_NEAREST&&r!==h.cw.NEAREST_MIPMAP_LINEAR||(r=h.cw.NEAREST,t.hasMipmap||(i=h.cw.NEAREST)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,r),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,i)}},{key:"_applyWrapMode",value:function(e,t){"number"==typeof t.wrapMode?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}},{key:"_applyAnisotropicFilteringParameters",value:function(e,t){var r,i=e.capabilities.textureFilterAnisotropic;i&&e.gl.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY,null!=(r=t.maxAnisotropy)?r:1)}}]),e}();function c(e){return(0,s.pC)(e)&&"type"in e&&"compressed"===e.type}function d(e){return(0,s.pC)(e)&&!c(e)&&!function(e){return(0,s.pC)(e)&&"byteLength"in e}(e)}function m(e){return e===h.No.TEXTURE_3D||e===h.No.TEXTURE_2D_ARRAY}function E(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Math.max(t,r);return e===h.No.TEXTURE_3D&&(a=Math.max(a,i)),Math.round(Math.log(a)/Math.LN2)+1}_.TEXTURE_UNIT_FOR_UPDATES=0},30308:function(e,t,r){function i(e){return window.WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext}r.d(t,{Z:function(){return i}})},37825:function(e,t,r){r.d(t,{CG:function(){return u},hZ:function(){return s},zu:function(){return l}});var i=r(10064),a=r(93169),n=r(32718).Z.getLogger("esri/views/webgl");var o=!!(0,a.Z)("enable-feature:webgl-debug");function s(){return o}function u(){return o}function l(e){if(s()){var t=e.getError();if(t){var r=function(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}(e,t),a=(new Error).stack;n.error(new i.Z("webgl-error","WebGL error occured",{message:r,stack:a}))}}}},49800:function(e,t,r){r.d(t,{kr:function(){return a},zO:function(){return i}});var i;r(93169);function a(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t===i.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"],n=null,o=0,s=a;o<s.length;o++){var u=s[o];try{n=e.getContext(u,r)}catch(l){}if(n)break}return n}!function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"}(i||(i={}))}}]);
//# sourceMappingURL=1378.3a9c2ba7.chunk.js.map