"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5626],{10691:function(e,r,t){t.d(r,{Z:function(){return B}});var n=t(42982),i=t(37762),a=t(1413),o=t(15671),s=t(43144),u=t(60136),l=t(29388),p=t(27366),c=(t(59486),t(92026)),f=t(49861),y=(t(63780),t(93169),t(25243),t(38511)),v=t(69912),d=function(e){(0,u.Z)(t,e);var r=(0,l.Z)(t);function t(){return(0,o.Z)(this,t),r.apply(this,arguments)}return(0,s.Z)(t)}(t(52639).Z);(0,p._)([(0,f.Cb)()],d.prototype,"events",void 0),(0,p._)([(0,f.Cb)()],d.prototype,"strings",void 0);var m=d=(0,p._)([(0,v.j)("esri.rest.support.DirectionsFeature")],d),h=t(49818),Z=t(53866),g=t(78952),b=t(29909),_=t(7882),C=function(e){(0,u.Z)(t,e);var r=(0,l.Z)(t);function t(e){var n;return(0,o.Z)(this,t),(n=r.call(this,e)).extent=null,n.features=null,n.geometryType="polyline",n.routeId=null,n.routeName=null,n.totalDriveTime=null,n.totalLength=null,n.totalTime=null,n}return(0,s.Z)(t,[{key:"readFeatures",value:function(e,r){var t,n=this;if(!e)return[];var i=null!=(t=r.summary.envelope.spatialReference)?t:r.spatialReference,o=i&&g.Z.fromJSON(i);return e.map((function(e){var r,t,i=n._decompressGeometry(e.compressedGeometry),s=new b.Z((0,a.Z)((0,a.Z)({},i),{},{spatialReference:o})),u=null!=(r=null==(t=e.events)?void 0:t.map((function(e){var r=e.arriveTimeUTC,t=e.ETA,n=e.point,i=n.x,a=n.y,s=n.z,u=e.strings;return new m({geometry:new _.Z({x:i,y:a,z:s,hasZ:void 0!==s,spatialReference:o}),attributes:{ETA:t,arriveTimeUTC:r},strings:u})})))?r:[];return new m({attributes:e.attributes,events:u,geometry:s,strings:e.strings})}))}},{key:"mergedGeometry",get:function(){if(!this.features)return null;var e=this.features.map((function(e){var r=e.geometry;return(0,c.Wg)(r)})),r=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,r)}},{key:"strings",get:function(){return this.features.map((function(e){return e.strings}))}},{key:"_decompressGeometry",value:function(e){var r,t,n,i,a,o,s,u,l=0,p=0,c=0,f=0,y=[],v=0,d=0,m=0;if((a=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||(a=[]),0===parseInt(a[v],32)){v=2;var h=parseInt(a[v],32);v++,o=parseInt(a[v],32),v++,1&h&&(d=a.indexOf("|")+1,s=parseInt(a[d],32),d++),2&h&&(m=a.indexOf("|",d)+1,u=parseInt(a[m],32),m++)}else o=parseInt(a[v],32),v++;for(;v<a.length&&"|"!==a[v];){r=parseInt(a[v],32)+l,v++,l=r,t=parseInt(a[v],32)+p,v++,p=t;var Z=[r/o,t/o];d&&(i=parseInt(a[d],32)+c,d++,c=i,Z.push(i/s)),m&&(n=parseInt(a[m],32)+f,m++,f=n,Z.push(n/u)),y.push(Z)}return{paths:[y],hasZ:d>0,hasM:m>0}}},{key:"_mergePolylinesToSinglePath",value:function(e,r){if(0===e.length)return new b.Z({spatialReference:r});var t,a=[],o=(0,i.Z)(e);try{for(o.s();!(t=o.n()).done;){var s,u=t.value,l=(0,i.Z)(u.paths);try{for(l.s();!(s=l.n()).done;){var p=s.value;a.push.apply(a,(0,n.Z)(p))}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}var c=[];a.forEach((function(e,r){0!==r&&e[0]===a[r-1][0]&&e[1]===a[r-1][1]||c.push(e)}));var f=e[0],y=f.hasM,v=f.hasZ;return new b.Z({hasM:y,hasZ:v,paths:[c],spatialReference:r})}}]),t}(h.default);(0,p._)([(0,f.Cb)({type:Z.Z,json:{read:{source:"summary.envelope"}}})],C.prototype,"extent",void 0),(0,p._)([(0,f.Cb)()],C.prototype,"features",void 0),(0,p._)([(0,y.r)("features")],C.prototype,"readFeatures",null),(0,p._)([(0,f.Cb)()],C.prototype,"geometryType",void 0),(0,p._)([(0,f.Cb)({readOnly:!0})],C.prototype,"mergedGeometry",null),(0,p._)([(0,f.Cb)()],C.prototype,"routeId",void 0),(0,p._)([(0,f.Cb)()],C.prototype,"routeName",void 0),(0,p._)([(0,f.Cb)({value:null,readOnly:!0})],C.prototype,"strings",null),(0,p._)([(0,f.Cb)({json:{read:{source:"summary.totalDriveTime"}}})],C.prototype,"totalDriveTime",void 0),(0,p._)([(0,f.Cb)({json:{read:{source:"summary.totalLength"}}})],C.prototype,"totalLength",void 0),(0,p._)([(0,f.Cb)({json:{read:{source:"summary.totalTime"}}})],C.prototype,"totalTime",void 0);var B=C=(0,p._)([(0,v.j)("esri.rest.support.DirectionsFeatureSet")],C)},55626:function(e,r,t){t.r(r),t.d(r,{default:function(){return j}});var n=t(15671),i=t(43144),a=t(60136),o=t(29388),s=t(27366),u=t(49861),l=(t(63780),t(93169),t(25243),t(69912)),p=t(1413),c=t(15861),f=t(87757),y=t(76200),v=t(43813),d=t(41862),m=t(69732),h=t(23084),Z=(t(59486),t(52639)),g=t(46784),b=t(92026),_=t(38511),C=t(78952),B=t(10691),k=t(49818),T=t(89677),R=t(7882),S=t(29909),N=t(80885);function O(e){return k.default.fromJSON(e).features.map((function(e){return e.geometry}))}var I=function(e){(0,a.Z)(t,e);var r=(0,o.Z)(t);function t(e){var i;return(0,n.Z)(this,t),(i=r.call(this,e)).directions=null,i.facilities=null,i.incidents=null,i.messages=null,i.pointBarriers=null,i.polylineBarriers=null,i.polygonBarriers=null,i.routes=null,i}return(0,i.Z)(t,[{key:"readFacilities",value:function(e){return O(e)}},{key:"readIncidents",value:function(e){return O(e)}},{key:"readPointBarriers",value:function(e,r){return O(r.barriers)}},{key:"readPolylineBarriers",value:function(e){return O(e)}},{key:"readPolygonBarriers",value:function(e){return O(e)}},{key:"readRoutes",value:function(e){return function(e){return e.features.map((function(r){var t=C.Z.fromJSON(e.spatialReference),n=Z.Z.fromJSON(r);return(0,b.pC)(n.geometry)&&(n.geometry.spatialReference=t),n}))}(e)}}]),t}(g.wq);(0,s._)([(0,u.Cb)({type:[B.Z]})],I.prototype,"directions",void 0),(0,s._)([(0,u.Cb)({type:[R.Z]})],I.prototype,"facilities",void 0),(0,s._)([(0,_.r)("facilities")],I.prototype,"readFacilities",null),(0,s._)([(0,u.Cb)({type:[R.Z]})],I.prototype,"incidents",void 0),(0,s._)([(0,_.r)("incidents")],I.prototype,"readIncidents",null),(0,s._)([(0,u.Cb)({type:[T.Z]})],I.prototype,"messages",void 0),(0,s._)([(0,u.Cb)({type:[R.Z]})],I.prototype,"pointBarriers",void 0),(0,s._)([(0,_.r)("pointBarriers",["barriers"])],I.prototype,"readPointBarriers",null),(0,s._)([(0,u.Cb)({type:[S.Z]})],I.prototype,"polylineBarriers",void 0),(0,s._)([(0,_.r)("polylineBarriers")],I.prototype,"readPolylineBarriers",null),(0,s._)([(0,u.Cb)({type:[N.Z]})],I.prototype,"polygonBarriers",void 0),(0,s._)([(0,_.r)("polygonBarriers")],I.prototype,"readPolygonBarriers",null),(0,s._)([(0,u.Cb)({type:[Z.Z]})],I.prototype,"routes",void 0),(0,s._)([(0,_.r)("routes")],I.prototype,"readRoutes",null);var A=I=(0,s._)([(0,l.j)("esri.rest.support.ClosestFacilitySolveResult")],I),w=(0,v.E)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},facilities:!0,incidents:!0,outSpatialReference:{name:"outSR",getter:function(e){return e.outSpatialReference.wkid}},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},returnRoutes:{name:"returnCFRoutes"},travelMode:!0});function x(){return x=(0,c.Z)(f.mark((function e(r,t,n){var i,a,o,s,u,l,c,v,Z,g,b,_,C,B,k;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],a=[],o={},s={},u=(0,h.en)(r),l=u.path,t.incidents&&t.incidents.features&&(0,m.et)(t.incidents.features,a,"incidents.features",o),t.facilities&&t.facilities.features&&(0,m.et)(t.facilities.features,a,"facilities.features",o),t.pointBarriers&&t.pointBarriers.features&&(0,m.et)(t.pointBarriers.features,a,"pointBarriers.features",o),t.polylineBarriers&&t.polylineBarriers.features&&(0,m.et)(t.polylineBarriers.features,a,"polylineBarriers.features",o),t.polygonBarriers&&t.polygonBarriers.features&&(0,m.et)(t.polygonBarriers.features,a,"polygonBarriers.features",o),e.next=4,(0,d.aX)(a);case 4:for(v in c=e.sent,o)Z=o[v],i.push(v),s[v]=c.slice(Z[0],Z[1]);if(!(0,m.Wf)(s,i)){e.next=17;break}return g=null,e.prev=8,e.next=11,(0,m.bI)(l,t.apiKey,n);case 11:g=e.sent,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:g&&!g.hasZ&&(0,m.ef)(s,i);case 17:for(_ in b=function(e){s[e].forEach((function(r,n){t.get(e)[n].geometry=r}))},s)b(_);return C=(0,p.Z)((0,p.Z)({},n),{},{query:(0,p.Z)((0,p.Z)((0,p.Z)({},u.query),w.toQueryParams(t)),{},{f:"json"})}),e.next=22,(0,y.default)("".concat(l,"/solveClosestFacility"),C);case 22:return B=e.sent,k=B.data,e.abrupt("return",A.fromJSON(k));case 25:case"end":return e.stop()}}),e,null,[[8,14]])}))),x.apply(this,arguments)}var P=function(e){(0,a.Z)(t,e);var r=(0,o.Z)(t);function t(e){var i;return(0,n.Z)(this,t),(i=r.call(this,e)).url=null,i}return(0,i.Z)(t,[{key:"solve",value:function(e,r){return function(e,r,t){return x.apply(this,arguments)}(this.url,e,r)}}]),t}(t(4338).Z);(0,s._)([(0,u.Cb)()],P.prototype,"url",void 0);var j=P=(0,s._)([(0,l.j)("esri.tasks.ClosestFacilityTask")],P)},4338:function(e,r,t){t.d(r,{Z:function(){return v}});var n=t(1413),i=t(15671),a=t(43144),o=t(60136),s=t(29388),u=t(27366),l=t(85015),p=t(35995),c=t(49861),f=(t(63780),t(93169),t(25243),t(69912)),y=function(e){(0,o.Z)(t,e);var r=(0,s.Z)(t);function t(){var e;(0,i.Z)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).requestOptions=null,e.url=null,e}return(0,a.Z)(t,[{key:"normalizeCtorArgs",value:function(e,r){return"string"!=typeof e?e:(0,n.Z)({url:e},r)}},{key:"parsedUrl",get:function(){return this._parseUrl(this.url)}},{key:"_parseUrl",value:function(e){return e?(0,p.mN)(e):null}},{key:"_encode",value:function(e,r,t){var n={};for(var i in e)if("declaredClass"!==i){var a=e[i];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){n[i]=[];for(var o=0;o<a.length;o++)n[i][o]=this._encode(a[o])}else if("object"==typeof a)if(a.toJSON){var s=a.toJSON(t&&t[i]);n[i]=r?s:JSON.stringify(s)}else n[i]=r?a:JSON.stringify(a);else n[i]=a}return n}}]),t}(l.Z);(0,u._)([(0,c.Cb)({readOnly:!0})],y.prototype,"parsedUrl",null),(0,u._)([(0,c.Cb)()],y.prototype,"requestOptions",void 0),(0,u._)([(0,c.Cb)({type:String})],y.prototype,"url",void 0);var v=y=(0,u._)([(0,f.j)("esri.tasks.Task")],y)}}]);
//# sourceMappingURL=5626.e7611377.chunk.js.map